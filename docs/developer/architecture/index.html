<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Architecture Overview · Webaverse</title><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="generator" content="Docusaurus"/><meta name="description" content="View miro: https://miro.com/app/board/o9J_lbA81ag=/"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Architecture Overview · Webaverse"/><meta property="og:type" content="website"/><meta property="og:url" content="https://docs.webaverse.com/"/><meta property="og:description" content="View miro: https://miro.com/app/board/o9J_lbA81ag=/"/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/img/favicon.ico"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/favicon.ico" alt="Webaverse"/><h2 class="headerTitleWithLogo">Webaverse</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"></ul></nav></div></header></div></div><div class="navPusher singleRowMobileNav"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Developer</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Webaverse</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/webaverse/silk">SILK</a></li><li class="navListItem"><a class="navItem" href="/docs/webaverse/items">Items</a></li><li class="navListItem"><a class="navItem" href="/docs/webaverse/avatars">Avatars</a></li><li class="navListItem"><a class="navItem" href="/docs/webaverse/worlds">Worlds</a></li><li class="navListItem"><a class="navItem" href="/docs/webaverse/parcels">Parcels</a></li><li class="navListItem"><a class="navItem" href="/docs/webaverse/whitepaper">Whitepaper</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Bots</h4><ul><li class="navListItem"><a class="navItem" href="/docs/webaverse/discord-bot">Discord Bot</a></li><li class="navListItem"><a class="navItem" href="/docs/webaverse/twitter-bot">Twitter Bot</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Market</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/market/silk-guide">How To Get SILK</a></li><li class="navListItem"><a class="navItem" href="/docs/market/nfts-guide">How To Buy And Sell NFTs</a></li><li class="navListItem"><a class="navItem" href="/docs/market/matic-guide">Matic Marketplace Instructions</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Create</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/create/overview">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/create/mint">How To Mint NFTs</a></li><li class="navListItem"><a class="navItem" href="/docs/create/mint-discord">How To Mint NFTs in Discord</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Season 0: Genesis</h4><ul><li class="navListItem"><a class="navItem" href="/docs/create/guidelines">Submission Guide</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">3D Models</h4><ul><li class="navListItem"><a class="navItem" href="/docs/create/import-blender">Import From Blender</a></li><li class="navListItem"><a class="navItem" href="/docs/create/bake-physics">Bake Physics For 3D Model</a></li><li class="navListItem"><a class="navItem" href="/docs/create/multiple-animations">Export Multiple Animations</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Avatars</h4><ul><li class="navListItem"><a class="navItem" href="/docs/create/import-vroid">Import From VRoid</a></li><li class="navListItem"><a class="navItem" href="/docs/create/import-meebit">Import Meebits</a></li><li class="navListItem"><a class="navItem" href="/docs/create/wearables">Mint Avatar Wearables</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Weapons</h4><ul><li class="navListItem"><a class="navItem" href="/docs/create/sword">Swords</a></li><li class="navListItem"><a class="navItem" href="/docs/create/pickaxe">Pickaxe</a></li><li class="navListItem"><a class="navItem" href="/docs/create/guns">Guns</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Pets and Vehicles</h4><ul><li class="navListItem"><a class="navItem" href="/docs/create/pets">Pets</a></li><li class="navListItem"><a class="navItem" href="/docs/create/mounts">Mounts and Vehicles</a></li><li class="navListItem"><a class="navItem" href="/docs/create/hoverboards">Hoverboards</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Voxels</h4><ul><li class="navListItem"><a class="navItem" href="/docs/create/import-magicavoxel">Import From MagicaVoxel</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Developer</h3><ul class=""><li class="navListItem navListItemActive"><a class="navItem" href="/docs/developer/architecture">Architecture Overview</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">XRPackage</h4><ul><li class="navListItem"><a class="navItem" href="/docs/developer/xrpackage-overview">What is XRPackage?</a></li><li class="navListItem"><a class="navItem" href="/docs/developer/creating-an-xrpk">Create An XRPackage</a></li><li class="navListItem"><a class="navItem" href="/docs/developer/xrpackage-design-guidelines">Design Guidelines</a></li><li class="navListItem"><a class="navItem" href="/docs/developer/monetization">Add Monetization</a></li><li class="navListItem"><a class="navItem" href="/docs/developer/examples">Examples</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">API</h4><ul><li class="navListItem"><a class="navItem" href="/docs/developer/runtime-api">Runtime API</a></li><li class="navListItem"><a class="navItem" href="/docs/developer/manifest-api">Manifest API</a></li><li class="navListItem"><a class="navItem" href="/docs/developer/monetization-api">Monetization API</a></li></ul></div></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 id="__docusaurus" class="postHeaderTitle">Architecture Overview</h1></header><article><div><span><p>View miro: <a href="https://miro.com/app/board/o9J_lbA81ag=/">https://miro.com/app/board/o9J_lbA81ag=/</a></p>
<ul>
<li><a href="https://github.com/webaverse/ethereum-bot">https://github.com/webaverse/ethereum-bot</a> -- discord client</li>
<li><a href="https://github.com/webaverse/app">https://github.com/webaverse/app</a> -- front end game app</li>
<li><a href="https://github.com/webaverse/api-backend">https://github.com/webaverse/api-backend</a> -- API backend</li>
<li><a href="https://github.com/webaverse/redis-server">https://github.com/webaverse/redis-server</a> -- Redis server</li>
<li><a href="https://github.com/webaverse/ipfs-backend">https://github.com/webaverse/ipfs-backend</a> -- IPFS server</li>
<li><a href="https://github.com/webaverse/contracts">https://github.com/webaverse/contracts</a> -- contracts and deployment with truffle</li>
</ul>
<hr>
<h2><a class="anchor" aria-hidden="true" id="minting-flow"></a><a href="#minting-flow" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Minting Flow</h2>
<p>This is what happens when a user uploads a file to a Webaverse interface be minted as a NFT.</p>
<ol>
<li>User logs into website through Metamask, Discord, or Email or joins a Discord server with the NFT bot.</li>
<li>Uploads files to minting interface (jpg, png, gif, mp3, mp4, webm, glb, VRM, WBN)</li>
<li>The content uploads to IPFS. Webaverse runs its own pinning server.</li>
</ol>
<p><img src="/img/minting-flow.jpg" alt="">
<a href="/img/minting-flow2.jpg">Link to vertical view</a></p>
<p>After minting, the preview server captures a preview of the NFT and generates a trading card format. To learn more see <a href="/docs/developer/preview-flow">preview flow</a>.</p>
<hr>
<h2><a class="anchor" aria-hidden="true" id="transfer-flow"></a><a href="#transfer-flow" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Transfer Flow</h2>
<p>This is what happens when you want to transfer a NFT from the sidechain over to other blockchains like Polygon (previously Matic) and Ethereum mainnet.</p>
<ol>
<li>Start with NFT that's on the Webaverse sidechain in your inventory</li>
<li>Hit &quot;Current Location&quot; to go to transfer menu, for this example can select Polygon</li>
<li>Transfer will call the Deposit() function on the smart contract to the sidechain</li>
<li>Get back transaction hash, Signing Oracle will say whether some fact of it is true or false</li>
<li>Whatever answer is, will signs off on that fact with ECDSA signature</li>
<li>The smart contract will then call Withdraw() to Polygon Network</li>
<li>The item will now be visible on <a href="https://opensea.io">Opensea.io</a> with the Matic tag</li>
</ol>
<p><img src="/img/transfer-flow.jpg" alt="">
<a href="/img/transfer-flow2.jpg">Link to vertical view</a></p>
<hr>
<h2><a class="anchor" aria-hidden="true" id="loading-flow"></a><a href="#loading-flow" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Loading Flow</h2>
<p>This flow describes how the engine accesses and loads tokens. The loading and preview flow are both quite similar to each other, main difference being one loads in client for users while the other loads in a server for capturing preview media.</p>
<ol>
<li>Starts with the user-agent (Webaverse website or NFT Discord bot) that wants token data.</li>
<li>Client request a token json which intiates sidechain sending token events to the Redis server.</li>
<li>The API server sends the token json containing an IPFS hash to the files</li>
<li>The IPFS hash is extracted from the token json to the IPFS server</li>
<li>The raw files linked from the IPFS hash (jpg, png, gif, mp3, mp4, webm, glb, VRM, WBN) get loaded into the interface (virtual world, Opensea).</li>
</ol>
<p><img src="/img/loading-flow.jpg" alt="">
<a href="/img/loading-flow2.jpg">Link to vertical view</a></p>
<hr>
<h2><a class="anchor" aria-hidden="true" id="preview-flow"></a><a href="#preview-flow" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Preview Flow</h2>
<p>The preview server is a headless chromium instance that generates screenshots and animations of items via puppeteer. It's also in charge of generating unique trading cards for every NFT item minted. Here's how it works:</p>
<ol>
<li>Start with user-agent (website or Discord bot) requesting a preview image.</li>
<li>Request gets sent to the preview server, checks S3 cache if there's a preview already.</li>
<li>If there's no preview, the server will ask the API about the token and fetch the IPFS content</li>
<li>The files from the IPFS hash get rendered using Puppeteer, exported as previews.</li>
</ol>
<p><img src="/img/preview-flow.jpg" alt="">
<a href="/img/preview-flow2.jpg">Link to vertical view</a></p>
</span></div></article></div><div class="docLastUpdate"><em>Last updated on 6/3/2021</em></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/create/import-magicavoxel"><span class="arrow-prev">← </span><span class="function-name-prevnext">Import From MagicaVoxel</span></a><a class="docs-next button" href="/docs/developer/xrpackage-overview"><span>What is XRPackage?</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#minting-flow">Minting Flow</a></li><li><a href="#transfer-flow">Transfer Flow</a></li><li><a href="#loading-flow">Loading Flow</a></li><li><a href="#preview-flow">Preview Flow</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"></a><div><h5>Docs</h5><a href="/docs/index.html">Overview</a><a href="/docs/create/overview">Create Overview</a></div><div><h5>Community</h5><a href="https://discord.gg/R5wqYhvv53" target="_blank" rel="noreferrer noopener">Discord</a><a href="https://twitter.com/webmixedreality" target="_blank" rel="noreferrer noopener">Twitter</a></div><div><h5>More</h5><a href="https://webaverse.com">Webaverse</a><a href="https://github.com/webaverse/">GitHub</a></div></section><section class="copyright">© 2021 Webaverse</section></footer></div></body></html>